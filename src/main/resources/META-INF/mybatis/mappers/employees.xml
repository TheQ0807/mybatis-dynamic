<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sample.damo.mappers.EmployeeMapper">

	<select id="getAllEmployees" resultType="Employee">
		select
			employee_id			as id,
			first_name			as firstName,
			last_name			as lastName,
			phone_number		as phoneNumber,
			email,
			hire_date			as hireDate,
			job_id				as	jobId,
			salary,
			commission_pct		as commissionPct,
			manager_id			as managerId,
			department_id		as departmentId
		from
			employees
		order by
			employee_id asc
	</select>

	
	<select id="searchEmployees" parameterType="Employee" resultType="Employee">
		select
			employee_id			as id,
			first_name			as firstName,
			last_name			as lastName,
			phone_number		as phoneNumber,
			email,
			hire_date			as hireDate,
			job_id				as	jobId,
			salary,
			commission_pct		as commissionPct,
			manager_id			as managerId,
			department_id		as departmentId
		from
			employees
		<where>
			<if test="firstName != null">
				first_name = #{firstName}
			</if>
			<if test="jobId != null">
				and job_id = #{jobId}
			</if>
			<if test="hireDate != null">
				and to_char(hire_date, 'yyyy') = to_char(hireDate, 'yyyy')
			</if>
			<if test="departmentId != null">
				and department_id = #{departmentId}
			</if>
		</where>
		order by
			employee_id asc
	</select>
	
	<select id="findEmployees" parameterType="Criteria"  resultType="Employee">
		select
			employee_id			as id,
			first_name			as firstName,
			last_name			as lastName,
			phone_number		as phoneNumber,
			email,
			hire_date			as hireDate,
			job_id				as	jobId,
			salary,
			commission_pct		as commissionPct,
			manager_id			as managerId,
			department_id		as departmentId
		from
			employees
		<where>
			<if test="opt != null and keyword != null">
				<choose>
					<when test="opt == 'name'">
						first_name = #{keyword}
					</when>
					<when test="opt == 'job'">
						job_id = #{keyword}
					</when>
					<when test="opt == 'dept'">
						department_id = #{keyword}
					</when>
				</choose>
			</if>
		</where>
			
	</select>
	
</mapper>